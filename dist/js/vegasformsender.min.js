window.AlertFormSender={lang:{ru:{success_title:"Успешно!",success_msg:"Ваше письмо успешно отправлено!",error_title:"Ошибка!",text_send:"Отправляем...",btn_text:"Отправить"}},Svg:{error:'<svg viewbox="0 0 500 500" class="am_Error_Icon"><path class="am_SVG_circle" d="m444.34693,114.07007a236.95276,236.95276 0 0 1 44.1553,137.73747c0,129.97005 -106.94772,236.96443 -236.91777,236.96443s-236.91777,-106.94772 -236.91777,-236.91777s106.94772,-236.96443 236.91777,-236.96443a236.99941,236.99941 0 0 1 168.72548,70.59483"></path><line class="am_SVG_error1" y2="390" x2="390" y1="110" x1="110"></line><line class="am_SVG_error2" y2="390" x2="110" y1="110" x1="390"></line></svg>',success:'<svg viewbox="0 0 500 500" class="am_Success_Icon"><path class="am_SVG_circle" d="m443.0136,114.07007a236.95276,236.95276 0 0 1 44.1553,137.73747c0,129.97005 -106.94772,236.96443 -236.91777,236.96443s-236.91777,-106.94772 -236.91777,-236.91777s106.94772,-236.96443 236.91777,-236.96443a236.99941,236.99941 0 0 1 168.72548,70.59483"></path><polyline class="am_SVG_check" points="104.4892349243164,309.2001647949219 195.57406616210938,402.9600524902344 418.9292297363281,85.03718566894531 "></polyline></svg>',cross:'<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 224.512 224.512" style="enable-background:new 0 0 224.512 224.512;" xml:space="preserve"><g><polygon style="fill:#010002;" points="224.507,6.997 217.521,0 112.256,105.258 6.998,0 0.005,6.997 105.263,112.254 0.005,217.512 6.998,224.512 112.256,119.24 217.521,224.512 224.507,217.512 119.249,112.254 "/></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>'},modal:function(e){var r="success"===e?AlertFormSender.Svg.success:AlertFormSender.Svg.error,t='<div class="modal fade vg-form-sender-modal" id="modal-'+e+'" tabindex="-1" role="dialog" aria-labelledby="modal-'+e+'" aria-hidden="true">    <div class="modal-dialog" role="document">        <div class="modal-content">            <button type="button" class="modal-close white" data-dismiss="modal" aria-label="Close">'+AlertFormSender.Svg.cross+'</button>                        <div class="vg-sender-alert vg-sender-alert-'+e+'">'+r+'                <div class="title"></div>                <div class="msg"></div>            </div>        </div>    </div></div>';return $("body").append(t),!1},block:function(e,r){var t=r.closest(r.data("parent")),a="success"===e?AlertFormSender.Svg.success:AlertFormSender.Svg.error,s='<div class="vg-form-sender-block '+e+'" style="display: none"><div class="block-wrapper vg-sender-alert vg-sender-alert-'+e+'">'+a+'   <div class="title"></div>   <div class="msg"></div></div>';t.after(s)},Action:{draw:function(e){var r=e.data("compvare")||"modal";"modal"===r?(AlertFormSender.modal("success"),AlertFormSender.modal("error")):"block"===r&&(AlertFormSender.block("success",e),AlertFormSender.block("error",e))},success:function(e,r){this.draw(r);var t,a,s,o=r.find("[type=submit]"),n=o.data("btn-text")||AlertFormSender.lang.ru.btn_text,d=r.data("compvare")||"modal",l=o.data("success-text")||AlertFormSender.lang.ru.success_title;o.attr("disabled",!1).find("span").text(n),"modal"===d?(t=$("#modal-success"),$(".modal").modal("hide"),AlertFormSender.text(e,l,t),t.modal("show")):"block"===d&&(a=r.closest(r.data("parent")),s=$(".vg-form-sender-block.success"),AlertFormSender.text(e,l,s),a.slideUp("slow"),s.slideDown("slow"))},error:function(e,r){this.draw(r);var t,a,s,o=r.find("[type=submit]"),n=o.data("btn-text")||AlertFormSender.lang.ru.btn_text,d=r.data("compvare")||"modal",l=o.data("error-text")||AlertFormSender.lang.ru.error_title;o.attr("disabled",!1).find("span").text(n),"modal"===d?(t=$("#modal-error"),$(".modal").modal("hide"),AlertFormSender.text(e,l,t),t.modal("show")):"block"===d&&(a=r.closest(r.data("parent")),s=$(".vg-form-sender-block.error"),AlertFormSender.text(e,l,s),a.slideUp("slow"),s.slideDown("slow"))},validate:function(e){$.each(e,function(){$(this).addClass("error")})},beforeSend:function(e){var r=e.find("[type=submit]"),t=r.data("text-send")||AlertFormSender.lang.ru.text_send;r.attr("disabled",!0).find("span").text(t)}},text:function(e,r,t){t.find(".msg").html(e),t.find(".title").html(r)}},$(document).ready(function(){var e=$("[data-vgFormSender]");e.vegasFormSender({beforeSend:function(e){AlertFormSender.Action.beforeSend(e)},success:function(e,r){AlertFormSender.Action.success(e.msg,r)},error:function(e,r){AlertFormSender.Action.error(e,r)},validate:function(e,r){ValidateFormVegas.init(r,e)}}),e.each(function(){var e=$(this).find("input[data-mask]");void 0!==$.fn.inputmask?e.each(function(){var e=$(this),r=e.data("mask"),t={clearIncomplete:e.data("mask-complete")||!1};""!==r&&"undefined"!==r&&(t.mask="phone"===r?"+79999999999":"birthday"===r?"99.99.9999":r,e.inputmask(t))}):console.error("Plugin InputMask not installed")})}),function(g){g.fn.vegasFormSender=function(u){u=g.extend({error:function(){},success:function(){},beforeSend:function(){},validate:function(){}},arguments[0]||{});return this.each(function(){var n=g(this),d=u.action||n.attr("action")||location.href,l=u.method||n.attr("method")||"get",i=!!u.fields&&u.fields,c=u.redirectSuccess||n.data("redirect-success")||!1;u.redirectError||n.data("redirect-error");i&&"function"==typeof i&&(i=u.fields());var m=!0;n.on("submit",function(){var e,r=new FormData(this),t=g(this).find("[data-validate]");if(t.length&&(e=function(e){var a={empty:[],email:[],password:[]};if(e.each(function(){var e,r,t=g(this);""===t.val()?a.empty.push(t):("email"!==(e=t.data("validate"))||(r=t.val(),/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(r).toLowerCase()))||a.email.push(t),"password"===e&&a.password.push(t))}),1<a.password.length){for(var r=[],t=1;t<=a.password.length;t++){var s=a.password[t-1];r.push(s.val())}1===(r=r.filter(function(e,r,t){return t.indexOf(e)===r})).length&&(a.password=[])}return a}(t),u.validate.call(this,n,e),(e.empty.length||e.email.length||e.password.length)&&(m=!1)),m){if(i)for(var a in i)if("object"==typeof i[a])for(var s in i[a]){var o=Object.keys(i[a][s]).map(function(e){return i[a][s][e]});r.append(a,o)}else r.append(a,i[a]);g.ajax({url:d,method:l,data:r,cache:!1,contentType:!1,processData:!1,beforeSend:function(){u.beforeSend.call(this,n)},success:function(e){var r=e;c?window.location.href=c:u.success.call(this,r,n)},error:function(e,r){var t=JSON.parse(e.responseText),a=t.errors?t.errors[Object.keys(t.errors)[0]][0]:t.message||t.msg;u.error.call(this,a,n)}})}return!1})}),this}}(jQuery),window.ValidateFormVegas={init:function(e,r){console.log(e)}};